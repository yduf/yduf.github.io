---
published: true
title: 'Beating std::sort - Andrei'
tags: c++ algorithm sort fastware
---
> the complexity was set to being O(n log n) comparisons on _average_. /  
> Generic programming is why we can't have nice things. -  [Speed Is Found In The Minds of People  (CppCon2019 - Andrei)](https://www.youtube.com/watch?v=FJJTYQYB1JQ)

Sort covered:
- [sorting small arrays](https://www.youtube.com/watch?v=FJJTYQYB1JQ&t=600s) - up to 15 elements
	- sorted hundreds of elements fast.
    	- binary sort is always worse than linear insertion sort - because of bad branch predictability (50% success) vs (87.5% for linear search).
        - branchless binary search is even slower - ?
        - Middle-out Insertion Sort - start in the middle - grow & sort on both end.

see also:
- [itCppCon19](https://www.youtube.com/watch?v=zxwKAX7p8GE)
- [Changing std:sort at Google’s scale and beyond ](https://danlark.org/2022/04/20/changing-stdsort-at-googles-scale-and-beyond/) / [HN](https://news.ycombinator.com/item?id=31098822) - TL;DR; We are changing std::sort in LLVM’s libcxx.
