---
published: true
title: SQL Diff query
tags: sql diff
---
A query to compare content of tables with same schemas

{% highlight sql %}
select sum(in_old), sum(in_new),
       <group_by_columns>
from (
  select 1 as in_old, 0 as in_new, 
         <group_by_columns>
  from old_table
  union all
  select 0 as in_old, 1 as in_new,
         <group_by_columns>
  from new_table
)
group by <group_by_columns>
having sum(in_old) <> sum(in_new)
order by <your_choice>;
{% endhighlight %}
