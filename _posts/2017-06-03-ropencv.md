---
published: true
tags: ruby opencv
title: Ruby Bindings for OpenCV (ropencv)
---
> Unlike other OpenCV ruby binding projects like `ruby-opencv` or `opencv-ffi` this binding is automatically generated by parsing the OpenCV C++ headers. - [D-Alex/ropencv](https://github.com/d-alex/ropencv)

[doc](http://www.rubydoc.info/gems/ropencv/0.0.7/OpenCV/)

## [Install](https://github.com/d-alex/ropencv#installation)

- [Install opencv librairies]({% post_url 2019-04-27-opencv %})
	- tested with [4.5.4](https://github.com/opencv/opencv/tree/4.5.4) / [releases](https://opencv.org/releases/) / [release notes](https://github.com/opencv/opencv/wiki/ChangeLog#version454)

{% highlight bash %}
$ VERSION=4.5.4 git clone https://github.com/opencv/opencv.git -b $VERSION --depth 1
{% endhighlight %}

- [Install Ruby]({% post_url 2019-05-29-ruby %}) - no need to `sudo` using rbenv
- prerequesite 
	- `sudo apt-get install ruby-dev`	- needed to compile native gem
	- set a [default python](https://stackoverflow.com/questions/68792446/how-to-set-python3-as-default) `update-alternatives --install  /usr/bin/python python /usr/bin/python3 1`
- `gem install ropencv`

The last command will pick the opencv version installed and build binding to it.

### Test installation

Test some opencv call in ruby

{% highlight ruby %}

require 'ropencv'
include OpenCV

video_file = cv::VideoCapture.new( 0)

id = 0

cv::namedWindow("edges",1)
frame = cv::Mat.new
# detector = cv::FeatureDetector::create("SURF")
keypoints = Std::Vector.new(cv::KeyPoint)

while true do
	video_file.read( frame)
	cv::imshow("cam 0", frame)
	cv::wait_key( 1)
end
{% endhighlight %}
