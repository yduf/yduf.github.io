---
published: true
title: Ptr vs array access (C++)
tags: c++-memory asm array
---
## [Godbolt](https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(fontScale:14,j:1,lang:c%2B%2B,source:'//+cli:+-xc+-Wall+-O3+-march%3Dhaswell+-fopt-info-vec-optimized+%0A%0A%23pragma+GCC+optimize+%22O3%22%0A%0Astruct+Node+%7B+%0A++++Node*+next%3B%0A++++float+score%3B%0A%7D%3B%0A%0A//+Ptr%0Avoid+test1(+Node*+p)+%7B%0A++++for(%3B%3B)+%7B%0A++++++++if(+!!p)+break%3B%0A++++++++p+%3D+p-%3Enext%3B%0A++++%7D%0A%7D%0A%0A//+Vs+Array%0Astruct+Node2+%7B%0A++++int+next%3B%0A++++float+score%3B%0A%7D%3B%0A%0Astatic+Node2+arr%5B1000%5D%3B%0A%0Avoid+test2(+int+p)+%7B%0A++++for(%3B%3B)+%7B%0A++++++++if(+!!arr%5Bp%5D.next+)+break%3B%0A++++++++p+%3D+arr%5Bp%5D.next%3B%0A++++%7D%0A%7D%0A%0A%0A//+with+cast%0Avoid+test3(+Node2*+p)+%7B%0A++++for(%3B%3B)+%7B%0A++++++++if(+!!p)+break%3B%0A++++++++p+%3D+(Node2*)+p-%3Enext%3B%0A++++%7D%0A%7D'),l:'5',n:'0',o:'C%2B%2B+source+%231',t:'0')),k:47.62802387684575,l:'4',m:100,n:'0',o:'',s:0,t:'0'),(g:!((h:compiler,i:(compiler:g82,filters:(b:'0',binary:'1',commentOnly:'0',demangle:'0',directives:'0',execute:'1',intel:'0',libraryCode:'1',trim:'1'),fontScale:14,lang:c%2B%2B,libs:!(),options:'-std%3Dgnu%2B%2B17++++-fopt-info-vec-optimized+-Wpragmas+-ffast-math',source:1),l:'5',n:'0',o:'x86-64+gcc+8.2+(Editor+%231,+Compiler+%231)+C%2B%2B',t:'0')),header:(),k:32.35480255685251,l:'4',m:100,n:'0',o:'',s:0,t:'0'),(g:!((h:output,i:(compiler:1,editor:1,fontScale:14,wrap:'1'),l:'5',n:'0',o:'%231+with+x86-64+gcc+8.2',t:'0')),k:20.017173566301746,l:'4',n:'0',o:'',s:0,t:'0')),l:'2',n:'0',o:'',t:'0')),version:4)
